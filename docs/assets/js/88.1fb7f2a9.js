(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{421:function(t,a,s){"use strict";s.r(a);var e=s(12),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-命令简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-命令简介"}},[t._v("#")]),t._v(" 1.命令简介")]),t._v(" "),a("p",[t._v("truncate 将文件缩小或扩展到指定大小。")]),t._v(" "),a("p",[t._v("如果指定的文件不存在将被创建。")]),t._v(" "),a("p",[t._v("如果文件大于指定的大小，则会丢失额外的数据。如果较短，它将被扩展，扩展的稀疏部分（空洞）读取时为零字节。")]),t._v(" "),a("p",[t._v("注意，文件空洞部分不占用磁盘空间，文件所占用的磁盘空间仍然是连续的。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/21477614c8124b8282ca1b3b80a8b11e.png",alt:"在这里插入图片描述"}})]),t._v(" "),a("h2",{attrs:{id:"_2-命令格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-命令格式"}},[t._v("#")]),t._v(" 2.命令格式")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("truncate OPTION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". FILE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("h2",{attrs:{id:"_3-选项说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-选项说明"}},[t._v("#")]),t._v(" 3.选项说明")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("-c, --no-create\n\t不创建任何文件。\n-o, --io-blocks\n\t将 SIZE 视为 IO 块数而不是字节数。Linux 文件系统的 IO 块大小通过为 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" 字节。\n-r, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--reference")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("RFILE"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t以 RFILE 为基础尺寸。\n-s, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--size")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("SIZE"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t设置或调整文件大小为指定字节。\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v("\n\t显示帮助信息并退出。\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("\n\t显示版本信息并退出。\n")])])]),a("p",[t._v("其中 SIZE 参数是一个整数和可选单位，如 10K（10*1024）。单位 K、M、G、T、P、E、Z、Y 都是 1024 的幂。KB,MB,... 为 1000 的幂。 也可以使用二进制前缀：KiB=K，MiB=M，以此类推。")]),t._v(" "),a("p",[t._v("SIZE 也可以添加前缀字符：'+' 扩展，'-' 减少，'<' 最多，'>' 至少，'/' 向下舍入为 SIZE 的倍数，'%' 向上舍入为 SIZE 的倍数。")]),t._v(" "),a("h2",{attrs:{id:"_4-常用示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-常用示例"}},[t._v("#")]),t._v(" 4.常用示例")]),t._v(" "),a("p",[t._v('我们先创建一个内容为 "Hello World!" 的文件 foo.txt。')]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo 'Hello World!' > foo.txt && ls -l foo.txt")]),t._v("\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(":43 foo.txt\n")])])]),a("p",[t._v("（1）截断文件到指定字节。")]),t._v(" "),a("p",[t._v("比如将上面的 foo.txt 截断到 11 字节，即删除最后一个换行符和感叹符。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# truncate -s 11 foo.txt")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat foo.txt")]),t._v("\nHello World\n")])])]),a("p",[t._v("（2）填充文件到指定字节。")]),t._v(" "),a("p",[t._v("比如将上面的 foo.txt 填充到 4097 字节，然后再使用 du 查看占用的磁盘空间大小。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# truncate -s 4097 foo.txt")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# du -h foo.txt")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(".0K\tfoo.txt\n")])])]),a("p",[t._v("可见，文件被填上空洞，实际上是不占用磁盘空间的。")]),t._v(" "),a("p",[t._v("至于为什么显示 4K，因为 Linux 文件系统存储最小单位为 block，不足 1 个 block 大小的文件也要占用 1 个 block 大小。这里的一个 block 一般等于 4096 字节。")]),t._v(" "),a("p",[t._v("我们可以通过 "),a("code",[t._v("ls -l")]),t._v(" 来显示文件包含空洞的逻辑大小。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls -l foo.txt")]),t._v("\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4097")]),t._v(" Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(":59 foo.txt\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"参考文献"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[t._v("#")]),t._v(" 参考文献")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://man7.org/linux/man-pages/man1/truncate.1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("truncate(1) - Linux manual page - man7.org"),a("OutboundLink")],1)]),t._v(" "),a("Vssue",{attrs:{title:"truncate"}})],1)}),[],!1,null,null,null);a.default=r.exports}}]);